# ğŸ“š DOCUMENTACIÃ“N COMPLETA - MÃ“DULO EQUIPO Y RRHH

**Proyecto:** Udar Edge 2.0  
**MÃ³dulo:** Equipo y RRHH  
**Ãšltima actualizaciÃ³n:** 26 Noviembre 2024  
**Estado:** âœ… Frontend 100% Completo - Backend Pendiente

---

## ğŸ¯ INICIO RÃPIDO

Â¿Primera vez aquÃ­? Lee esto primero:

1. **Lee:** [Resumen Ejecutivo para Programador](#resumen-ejecutivo) (3 minutos)
2. **Revisa:** [Diagramas de Flujo](#diagramas-de-flujo) (visuales)
3. **Profundiza:** [DocumentaciÃ³n Completa](#documentaciÃ³n-completa) (todo el detalle)
4. **Implementa:** [Checklist de IntegraciÃ³n](#checklist)

---

## ğŸ“„ ÃNDICE DE DOCUMENTOS

### 1ï¸âƒ£ RESUMEN EJECUTIVO
ğŸ“„ **Archivo:** `/RESUMEN_EJECUTIVO_PROGRAMADOR.md`

**Para quiÃ©n:** Programador Backend (primer contacto)

**QuÃ© contiene:**
- âš¡ Lo esencial en 3 minutos
- ğŸ—„ï¸ Resumen de 13 tablas SQL
- ğŸŒ Lista de 16 endpoints API
- ğŸ§® Resumen de 8 cÃ¡lculos automÃ¡ticos
- ğŸ¤– Resumen de 5 escenarios Make
- ğŸš¦ Plan de acciÃ³n sugerido (5 semanas)
- ğŸ†˜ Preguntas frecuentes

**CuÃ¡ndo leerlo:** PRIMERO - Antes que nada

---

### 2ï¸âƒ£ INTEGRACIÃ“N COMPLETA
ğŸ“„ **Archivo:** `/INTEGRACION_COMPLETA_EQUIPO_RRHH.md`

**Para quiÃ©n:** Programador Backend (implementaciÃ³n completa)

**QuÃ© contiene:**
- ğŸ“Œ Contexto general del mÃ³dulo
- ğŸ—„ï¸ **13 tablas SQL completas** con todos los campos
- ğŸ”˜ **16 endpoints** con request/response completos
- ğŸ§® **CÃ¡lculos internos** con fÃ³rmulas SQL y JavaScript
- ğŸ¤– **5 escenarios Make** con flujos completos
- ğŸ¨ VinculaciÃ³n de variables Figma
- âœ… Checklist de integraciÃ³n completo

**CuÃ¡ndo leerlo:** SEGUNDO - Para implementar todo

---

### 3ï¸âƒ£ DIAGRAMAS DE FLUJO
ğŸ“„ **Archivo:** `/DIAGRAMA_FLUJOS_RRHH.md`

**Para quiÃ©n:** Programador Backend + Frontend (visual)

**QuÃ© contiene:**
- ğŸ—ºï¸ Flujo general del sistema
- 1ï¸âƒ£ Flujo: Crear empleado (paso a paso)
- 2ï¸âƒ£ Flujo: Fichaje entrada/salida (paso a paso)
- 3ï¸âƒ£ **Flujo: Consultar KPI** â­ (paso a paso)
- 4ï¸âƒ£ Flujo: Consumos internos (paso a paso)
- 5ï¸âƒ£ Flujo: Modificar empleado (paso a paso)
- 6ï¸âƒ£ Arquitectura de datos (relaciones entre tablas)
- 7ï¸âƒ£ CÃ¡lculos automÃ¡ticos (diagrama)

**CuÃ¡ndo leerlo:** SIEMPRE - Muy Ãºtil para visualizar

---

### 4ï¸âƒ£ PESTAÃ‘A KPI (NUEVA)
ğŸ“„ **Archivo:** `/ACTUALIZACION_KPI_EMPLEADOS.md`

**Para quiÃ©n:** Programador Backend (focus en KPI)

**QuÃ© contiene:**
- ğŸ“Š Contenido completo de la pestaÃ±a KPI
- ğŸ“Œ KPIs principales (3 cards grandes)
- ğŸ”¶ KPIs secundarios (4 cards pequeÃ±os)
- ğŸ“ˆ HistÃ³rico de meses anteriores (tabla + grÃ¡fico)
- ğŸ”Œ Eventos preparados
- ğŸ“Š CÃ¡lculos Make/Backend detallados
- ğŸ¨ DiseÃ±o y colores
- ğŸ”— Endpoints requeridos (con JSON completo)
- ğŸ—‚ï¸ Estructura de tablas SQL sugerida
- âœ… Checklist especÃ­fico de KPI

**CuÃ¡ndo leerlo:** Para implementar la nueva pestaÃ±a KPI

---

### 5ï¸âƒ£ ESTE ARCHIVO (README)
ğŸ“„ **Archivo:** `/README_EQUIPO_RRHH.md`

**Para quiÃ©n:** Todos (punto de entrada)

**QuÃ© contiene:**
- Ãndice de todos los documentos
- GuÃ­a de lectura
- Resumen de caracterÃ­sticas
- TecnologÃ­as recomendadas

---

## ğŸ¯ Â¿QUÃ‰ LEER SEGÃšN TU ROL?

### Si eres PROGRAMADOR BACKEND (primer dÃ­a):

```
1. README_EQUIPO_RRHH.md (este archivo) â† ESTÃS AQUÃ
   â””â”€â–º 2. RESUMEN_EJECUTIVO_PROGRAMADOR.md (3 min)
       â””â”€â–º 3. DIAGRAMA_FLUJOS_RRHH.md (visual, 10 min)
           â””â”€â–º 4. INTEGRACION_COMPLETA_EQUIPO_RRHH.md (1 hora, profundo)
               â””â”€â–º 5. ACTUALIZACION_KPI_EMPLEADOS.md (30 min, KPI especÃ­fico)
```

### Si eres PROGRAMADOR BACKEND (implementando):

```
Tienes duda sobre...
â”œâ”€â–º Tablas SQL â†’ INTEGRACION_COMPLETA_EQUIPO_RRHH.md (secciÃ³n 2)
â”œâ”€â–º Endpoints â†’ INTEGRACION_COMPLETA_EQUIPO_RRHH.md (secciÃ³n 7)
â”œâ”€â–º CÃ¡lculos â†’ INTEGRACION_COMPLETA_EQUIPO_RRHH.md (secciÃ³n 4)
â”œâ”€â–º Flujos Make â†’ INTEGRACION_COMPLETA_EQUIPO_RRHH.md (secciÃ³n 5)
â”œâ”€â–º KPI especÃ­fico â†’ ACTUALIZACION_KPI_EMPLEADOS.md
â””â”€â–º Flujo visual â†’ DIAGRAMA_FLUJOS_RRHH.md
```

### Si eres FRONTEND DEVELOPER:

```
1. DIAGRAMA_FLUJOS_RRHH.md (entender flujos)
2. INTEGRACION_COMPLETA_EQUIPO_RRHH.md (secciÃ³n 7: Endpoints)
3. CÃ³digo: /components/gerente/EquipoRRHH.tsx
   â””â”€â–º Buscar: console.log('ğŸ”Œ EVENTO:')
       â””â”€â–º Reemplazar con llamadas a API
```

### Si eres PROJECT MANAGER:

```
1. RESUMEN_EJECUTIVO_PROGRAMADOR.md (resumen general)
2. INTEGRACION_COMPLETA_EQUIPO_RRHH.md (secciÃ³n 8: Checklist)
   â””â”€â–º Ver quÃ© estÃ¡ pendiente
```

---

## ğŸŒŸ CARACTERÃSTICAS DEL MÃ“DULO

### âœ… Completado (Frontend)

- [x] Listado de empleados con filtros
- [x] Modal "AÃ±adir Empleado" completo
- [x] Modal "Perfil de Empleado" con 6 pestaÃ±as:
  - [x] Cuenta (datos personales)
  - [x] Fichajes (gestiÃ³n de turnos)
  - [x] DocumentaciÃ³n (subir archivos)
  - [x] **KPI â­ NUEVO** (mÃ©tricas del empleado)
  - [x] Permisos (gestiÃ³n de accesos)
  - [x] HistÃ³rico (timeline de cambios)
- [x] Modal "Modificaciones" con 3 pestaÃ±as:
  - [x] Modificaciones (cambios laborales)
  - [x] Finalizaciones (bajas)
  - [x] Remuneraciones (bonus, incentivos)
- [x] GestiÃ³n de Centros de Coste
- [x] Consumos Internos (aprobaciÃ³n/rechazo)
- [x] Todos los eventos preparados con `console.log`
- [x] DiseÃ±o responsive (mobile + desktop)
- [x] Sistema de colores Udar Edge
- [x] TipografÃ­a: Poppins + Open Sans

### â³ Pendiente (Backend)

- [ ] 13 tablas SQL
- [ ] 16 endpoints API REST
- [ ] 5 escenarios Make
- [ ] 8 cÃ¡lculos automÃ¡ticos
- [ ] GeneraciÃ³n de PDF (exportar KPIs)
- [ ] IntegraciÃ³n con app mÃ³vil (fichajes)
- [ ] Sistema de notificaciones

---

## ğŸ—„ï¸ ESTRUCTURA DE ARCHIVOS

```
/
â”œâ”€â”€ App.tsx                              # App principal (no tocar)
â”œâ”€â”€ components/
â”‚   â””â”€â”€ gerente/
â”‚       â””â”€â”€ EquipoRRHH.tsx              # â­ Componente principal del mÃ³dulo
â”œâ”€â”€ RESUMEN_EJECUTIVO_PROGRAMADOR.md    # ğŸ“„ Resumen (3 min)
â”œâ”€â”€ INTEGRACION_COMPLETA_EQUIPO_RRHH.md # ğŸ“„ DocumentaciÃ³n completa
â”œâ”€â”€ DIAGRAMA_FLUJOS_RRHH.md             # ğŸ“„ Diagramas visuales
â”œâ”€â”€ ACTUALIZACION_KPI_EMPLEADOS.md      # ğŸ“„ PestaÃ±a KPI especÃ­fica
â””â”€â”€ README_EQUIPO_RRHH.md               # ğŸ“„ Este archivo (Ã­ndice)
```

---

## ğŸ› ï¸ TECNOLOGÃAS RECOMENDADAS

### Backend

**OpciÃ³n 1: Node.js**
- Framework: Express.js o Fastify
- ORM: Sequelize o Prisma
- AutenticaciÃ³n: JWT
- ValidaciÃ³n: Joi o Zod

**OpciÃ³n 2: PHP**
- Framework: Laravel
- ORM: Eloquent
- AutenticaciÃ³n: Laravel Passport

**OpciÃ³n 3: Python**
- Framework: FastAPI o Django
- ORM: SQLAlchemy o Django ORM
- AutenticaciÃ³n: OAuth2

### Base de Datos

- **MySQL 8.0+** (recomendado)
- **PostgreSQL 14+** (alternativa)

### AutomatizaciÃ³n

- **Make.com** (escenarios de automatizaciÃ³n)
- Webhooks para comunicaciÃ³n

### Almacenamiento

- **AWS S3** (documentos PDF, imÃ¡genes)
- **Cloudinary** (alternativa)
- **Google Cloud Storage** (alternativa)

### PDF

- **jsPDF** (JavaScript)
- **PDFKit** (Node.js)
- **Puppeteer** (renderizar HTML a PDF)
- **wkhtmltopdf** (HTML to PDF)

---

## ğŸ”¢ RESUMEN NUMÃ‰RICO

| MÃ©trica | Cantidad |
|---------|----------|
| **Tablas SQL** | 13 |
| **Endpoints API** | 16 |
| **Escenarios Make** | 5 |
| **CÃ¡lculos automÃ¡ticos** | 8 |
| **PestaÃ±as en modal** | 6 |
| **Eventos preparados** | ~25 |
| **Componentes React** | 1 principal |
| **PÃ¡ginas de documentaciÃ³n** | 5 |

---

## ğŸ“Š DATOS CLAVE

### Tablas SQL (13)

1. empresas
2. marcas
3. puntos_venta
4. **empleados** â­ PRINCIPAL
5. centros_coste_empleado
6. fichajes
7. incidencias_rrhh
8. documentacion_empleado
9. permisos
10. remuneraciones_extra
11. historico_rrhh
12. consumos_internos_equipo
13. **kpis_rrhh** â­ NUEVA

### Endpoints API (16)

**Empleados (6):**
- POST /empleados/crear
- GET /empleados
- GET /empleados/{id}
- PUT /empleados/{id}/modificar
- PUT /empleados/{id}/finalizar
- PUT /empleados/{id}/permisos

**KPI (3) â­ NUEVO:**
- GET /empleados/{id}/kpi
- GET /empleados/{id}/kpi/historico
- GET /empleados/{id}/kpi/export

**Fichajes (2):**
- POST /fichajes/entrada
- PUT /fichajes/{id}/salida

**Consumos (3):**
- POST /empleados/{id}/consumo
- PUT /consumos/{id}/aprobar
- PUT /consumos/{id}/rechazar

**DocumentaciÃ³n (1):**
- POST /empleados/{id}/documento

**Remuneraciones (1):**
- POST /empleados/{id}/remuneracion

### Escenarios Make (5)

1. Alta empleado
2. Fichajes en tiempo real
3. Consumos internos
4. Modificaciones RRHH
5. **KPI mensual** â­ NUEVO

### CÃ¡lculos AutomÃ¡ticos (8)

1. Horas trabajadas del mes
2. % Cumplimiento
3. Horas extra
4. Coste laboral total
5. Coste por hora
6. Incidencias (count + desglose)
7. Puntualidad (%)
8. Promedio mensual anual

---

## ğŸ¨ NUEVA PESTAÃ‘A KPI â­

La **pestaÃ±a KPI** es la Ãºltima funcionalidad aÃ±adida y muestra:

### KPI del Mes Actual

**3 Cards Principales:**
1. **Horas Trabajadas**: 168h / 160h (105%)
2. **Coste Laboral**: 2.520 â‚¬
3. **Incidencias**: 2 (1 baja, 1 retraso)

**4 Cards Secundarios:**
1. **Puntualidad**: 95% (19 de 20 dÃ­as)
2. **Productividad**: +12% (45 tareas)
3. **Horas Extra**: 8h (compensaciÃ³n pendiente)
4. **FormaciÃ³n**: 12h (3 cursos finalizados)

### HistÃ³rico de Meses Anteriores

- **Tabla comparativa** (6 columnas)
- **GrÃ¡fico de evoluciÃ³n** (barras)
- **Resumen anual** (3 cards)
- **BotÃ³n exportar** (PDF)

**DocumentaciÃ³n completa:** `/ACTUALIZACION_KPI_EMPLEADOS.md`

---

## ğŸš€ PLAN DE IMPLEMENTACIÃ“N

### Fase 1: Base de Datos (Semana 1)
- Crear 13 tablas SQL
- Poblar datos de ejemplo
- Crear triggers automÃ¡ticos

### Fase 2: Endpoints Core (Semana 2)
- Empleados (crear, modificar, finalizar)
- Fichajes (entrada, salida)
- Consumos (crear, aprobar, rechazar)
- DocumentaciÃ³n (subir)
- Permisos (actualizar)

### Fase 3: Endpoints KPI â­ (Semana 3)
- GET /empleados/{id}/kpi (cÃ¡lculos completos)
- GET /empleados/{id}/kpi/historico
- GET /empleados/{id}/kpi/export (PDF)

### Fase 4: Make (Semana 4)
- Escenario 1: Alta empleado
- Escenario 2: Fichajes en tiempo real
- Escenario 3: Consumos internos
- Escenario 4: Modificaciones RRHH
- Escenario 5: KPI mensual â­

### Fase 5: Testing e IntegraciÃ³n (Semana 5)
- Testing completo
- Conectar frontend con backend
- Ajustes finales

---

## âœ… CHECKLIST RÃPIDO

### Antes de empezar:
- [ ] He leÃ­do el Resumen Ejecutivo
- [ ] He revisado los Diagramas de Flujo
- [ ] Entiendo la estructura de tablas
- [ ] SÃ© quÃ© endpoints debo implementar

### Durante el desarrollo:
- [ ] Base de datos creada y poblada
- [ ] Endpoints implementados y testeados
- [ ] Escenarios Make configurados
- [ ] CÃ¡lculos automÃ¡ticos funcionando
- [ ] Frontend conectado con backend

### Antes de entregar:
- [ ] Todos los tests pasando
- [ ] DocumentaciÃ³n actualizada
- [ ] Demo funcional preparada
- [ ] Datos de ejemplo cargados

---

## ğŸ†˜ SOPORTE Y CONTACTO

### Â¿Tienes dudas?

**Paso 1:** Revisa la documentaciÃ³n
- 99% de las dudas estÃ¡n resueltas en los 5 documentos

**Paso 2:** Busca en el cÃ³digo
- Los eventos con `console.log('ğŸ”Œ EVENTO:')` te guÃ­an

**Paso 3:** Revisa los diagramas
- Los flujos visuales aclaran muchas dudas

**Paso 4:** Contacta al equipo
- [Tu canal de comunicaciÃ³n aquÃ­]

---

## ğŸ“– GLOSARIO

| TÃ©rmino | Significado |
|---------|-------------|
| **KPI** | Key Performance Indicator (Indicador de Rendimiento) |
| **RRHH** | Recursos Humanos |
| **PDV** | Punto De Venta |
| **Make** | Plataforma de automatizaciÃ³n (make.com) |
| **Fichaje** | Registro de entrada/salida de un empleado |
| **Incidencia** | Evento negativo (baja, retraso, ausencia) |
| **Consumo Interno** | Producto/servicio consumido por el empleado |
| **Centro de Coste** | UbicaciÃ³n a la que se imputa el coste del empleado |
| **Horas Extra** | Horas trabajadas por encima del contrato |
| **RemuneraciÃ³n Extra** | Pago adicional (bonus, incentivo) |

---

## ğŸ“š LECTURAS ADICIONALES

### Para entender el contexto de negocio:
- DocumentaciÃ³n general de Udar Edge
- MÃ³dulo TPV 360 (relacionado)
- MÃ³dulo Clientes y Productos (relacionado)
- MÃ³dulo Stock y Proveedores (relacionado)

### Para entender la arquitectura:
- Sistema de permisos granular
- Sistema multiempresa (jerarquÃ­a)
- Estructura de roles (Gerente, Empleado)

---

## ğŸ‰ Â¡Ã‰XITO!

Tienes todo lo necesario para implementar el **mÃ³dulo completo de Equipo y RRHH**.

**El frontend estÃ¡ 100% listo.** Solo tienes que conectar el backend siguiendo esta documentaciÃ³n.

Â¡Cualquier duda, revisa los documentos! Todo estÃ¡ explicado paso a paso.

---

**Ãšltima actualizaciÃ³n:** 26 Noviembre 2024  
**VersiÃ³n:** 1.0  
**Estado:** âœ… DocumentaciÃ³n Completa  
**PrÃ³ximo paso:** Implementar Backend

---

## ğŸ“Œ ENLACES RÃPIDOS

- [ğŸ“„ Resumen Ejecutivo](/RESUMEN_EJECUTIVO_PROGRAMADOR.md)
- [ğŸ“„ IntegraciÃ³n Completa](/INTEGRACION_COMPLETA_EQUIPO_RRHH.md)
- [ğŸ“„ Diagramas de Flujo](/DIAGRAMA_FLUJOS_RRHH.md)
- [ğŸ“„ PestaÃ±a KPI](/ACTUALIZACION_KPI_EMPLEADOS.md)
- [âš›ï¸ Componente React](/components/gerente/EquipoRRHH.tsx)

---

**Â¡Adelante con la implementaciÃ³n! ğŸš€**
